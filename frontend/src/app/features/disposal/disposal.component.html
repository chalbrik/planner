<div class="w-full h-full">

  <mat-sidenav-container class="h-full">

    <!-- Sidenav ze szczegółami pracownika -->
    <mat-sidenav
      mode="side"
      position="end"
      [opened]="isSidenavOpen()"
      class="!w-full sm:!w-1/3 overflow-y-auto !bg-primary-100">

      @if (selectedDisposal()) {
        <div class="p-4 flex flex-col gap-2">
          <button matIconButton aria-label="Zamknij" (click)="closeSidenav()" class="outline">
            <app-icon iconName="x-mark" iconSize="outline"></app-icon>
          </button>
          <div class="h-full w-full flex flex-col gap-6">
            <app-info-display [name]="'Imię Nazwisko'" [data]="`${selectedDisposal()?.full_name}`" [iconName]="'user-circle'" [iconSize]="'mini'"></app-info-display>

            <mat-divider class="!border-primary-400"></mat-divider>

            <mat-accordion>
              <mat-expansion-panel
                class="!shadow-none border border-primary-800"
                [expanded]="true"
                [hideToggle]="true"
                [disabled]="true">
                <mat-expansion-panel-header class="bg-primary-100">
                  <mat-panel-title> Dyspozycja </mat-panel-title>
                  <mat-panel-description> </mat-panel-description>
                </mat-expansion-panel-header>
                <div class="w-full my-4">
                  {{selectedDisposal()?.disposal}}
                </div>

              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </div>
      }
    </mat-sidenav>

    <!-- Główna zawartość z tabelą -->
    <mat-sidenav-content class="p-4">

      <!-- Pole filtrowania -->
      <div class="flex flex-col-reverse sm:flex-row gap-4 sm:h-16 !border-primary-800">
        <mat-form-field class="w-full h-full !border-primary-800">
          <input matInput class="h-11 !text-primary-800 !border-primary-800" (keyup)="applyFilter($event)" placeholder="Wyszukaj" #input>
        </mat-form-field>
      </div>

      <!-- Tabela -->
      <div class="mat-elevation-z8 border-2 border-primary-800 overflow-hidden rounded-xl">
        <table mat-table [dataSource]="dataSource" matSort>

          <!-- Kolumna Nazwa (Imię + Nazwisko) -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef class="!bg-primary-100 !border-b !border-primary-800 !text-primary-800"> Imię Nazwisko </th>
            <td mat-cell *matCellDef="let disposal" class="!bg-primary-100 !border-b !border-primary-800 !text-primary-800">
              {{disposal.full_name || 'Brak'}}
            </td>
          </ng-container>

          <!-- Kolumna Actions -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="!bg-primary-100 !border-b !border-primary-800 !text-primary-800 !text-right"> Akcje </th>
            <td mat-cell *matCellDef="let disposal" class="!bg-primary-100 !border-b !border-primary-800 !text-primary-800 !text-right">
              <button mat-icon-button class="delete-button" (click)="onDeleteDisposal(disposal, $event)">
                <app-icon iconName="trash" iconSize="outline" class="text-primary-800"></app-icon>
              </button>
            </td>
          </ng-container>

          <!-- Wiersze z obsługą kliknięcia -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns" class="!bg-primary-100 !h-11"></tr>
          <tr mat-row
              *matRowDef="let disposal; columns: displayedColumns;"
              (click)="onRowClick(disposal)"
              class="cursor-pointer !bg-primary-100 !h-11">
          </tr>

          <!-- Wiersz gdy brak danych -->
          <tr class="mat-row !bg-primary-100 !h-11" *matNoDataRow>
            <td class="mat-cell !bg-primary-100" [attr.colspan]="displayedColumns.length">
              Brak danych
            </td>
          </tr>
        </table>

        <!-- Paginator -->
        <mat-paginator
          class="!bg-primary-100"
          [pageSizeOptions]="[5, 10, 25, 50]"
          [pageSize]="10"
          aria-label="Wybierz stronę pracowników">
        </mat-paginator>
      </div>

    </mat-sidenav-content>
  </mat-sidenav-container>



</div>
